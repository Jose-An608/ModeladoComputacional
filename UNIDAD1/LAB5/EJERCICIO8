import math

def f8(x):
    return math.exp(-x) - x

def bisection_iterations(f,a,b,tol=1e-8, maxit=100):
    fa, fb = f(a), f(b)
    if fa*fb>0: raise ValueError("No cambio de signo en [a,b]")
    rows=[]
    for k in range(1, maxit+1):
        r = (a+b) /2.0
        fr=f(r)
        rows.append((k,a,b,r,fr))
        if abs(fr)<tol or (b-a)/2.0 < tol: break
        if fa*fr < 0:
            b, fb = r, fr
        else:
            a, fa = r, fr
    return rows

def secant_iterations(f, x0, x1, tol=1e-8, maxit=100):
    rows=[]
    for k in range(1, maxit + 1):
        fx0, fx1 = f(x0), f(x1)
        if fx1 == fx0: raise ZeroDivisionError("Denominadir cero")
        x2 = x1 - fx1*(x1-x0)/(fx1 - fx0)
        fx2 = f(x2)
        rows.append((k,x0,x1,x2,fx1,fx2))
        if abs(x2-x1)<tol or abs(fx2)<tol: break
        x0,x1 = x1,x2
    return rows


a8, b8 = 0, 1

bis8 = bisection_iterations(f8, a8, b8)
sec8 = secant_iterations(f8, 0, 1)

print("Ejercicio 8")
print("Bisección:")
for i, a, b, r, fr in bis8[:6]:
    print(i, a, b, r, fr)
print("... Última iteración:", bis8[-1])

print("\nSecante:")
for i, x0, x1, x2, fx1, fx2 in sec8:
    print(i, x0, x1, x2, fx1, fx2)

print("\nResultado final:")
print("Bisección raíz ≈", bis8[-1][3], "en iteración", bis8[-1][0])
print("Secante raíz ≈", sec8[-1][3], "en iteración", sec8[-1][0])
